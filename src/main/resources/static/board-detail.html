<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>게시물 상세 내용</title>
    <!-- 부트스트랩 CDN 추가 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container mt-4">
    <div class="card">
        <div class="card-body">
            <h5 class="card-title" id="boardTitle"></h5>
            <p class="card-text" id="boardContent"></p>
            <p class="card-text" id="boardWriter"></p>
            <p class="card-text" id="boardViewCount"></p>
        </div>
    </div>
</div>

<script>
    // URL에서 쿼리 매개변수 id를 가져옵니다.
    const urlParams = new URLSearchParams(window.location.search);
    const boardId = urlParams.get('id');
    // 게시물 정보를 가져오는 함수

    // 로컬 스토리지에서 AccessToken 가져오기
    const accessToken = localStorage.getItem("accessToken");

    function getBoardDetail() {
        // GET 요청 보내기
        fetch(`http://localhost:8080/board/retrieve/${boardId}`, {
            method: "GET",
            headers: {
                "Authorization": `Bearer ${accessToken}`
            }
        })
            .then(response => {
                if (!response.ok) {
                    throw new Error("Network response was not ok");
                }
                return response.json();
            })
            .then(data => {
                // 게시물 제목과 내용 표시
                document.getElementById("boardTitle").textContent = data.title;
                document.getElementById("boardContent").textContent = data.content;
                document.getElementById("boardWriter").textContent = `작성자: ${data.writer}`;
                document.getElementById("boardViewCount").textContent = `조회수: ${data.viewCount}`;
            })
            .catch(error => {
                console.error("Error:", error);
                alert("게시물을 가져오는 데 실패했습니다.");
            });
    }

    // 페이지 로드 시 게시물 정보를 가져오기
    window.onload = getBoardDetail;
</script>
</body>
</html>
